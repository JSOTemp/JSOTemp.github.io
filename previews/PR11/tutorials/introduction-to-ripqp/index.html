<!doctype html> <html lang=en  class=has-navbar-fixed-top > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/previews/PR11/libs/highlight/github.min.css"> <link rel=stylesheet  href="https://jsotemp.netlify.app/previews/PR11//css/styles.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="https://jsotemp.netlify.app/previews/PR11//assets/favicon.png"> <title>Template</title> <script src="/previews/PR11/libs/highlight/highlight.pack.js"></script> <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script> <script type=module  src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script> <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script> <script> hljs.getLanguage('julia').keywords.custom = 'obj grad hess AbstractNLPModel'; </script> <nav class="navbar is-primary is-fixed-top" role=navigation  aria-label="main navigation"> <div class=navbar-brand > <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11/"> <img src="https://jsotemp.netlify.app/previews/PR11//assets/jso.png"> </a> <a role=button  class=navbar-burger  aria-label=menu  aria-expanded=false  data-target=navbarBasicExample > <span aria-hidden=true ></span> <span aria-hidden=true ></span> <span aria-hidden=true ></span> </a> </div> <div id=navbarBasicExample  class=navbar-menu > <div class=navbar-start > <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//"> Home </a> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//news-and-blogposts/"> News and Blogposts </a> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//tutorials/"> Tutorials </a> <div class="navbar-item has-dropdown is-hoverable"> <a class=navbar-link  href="https://jsotemp.netlify.app/previews/PR11//ecosystems/index.html"> Ecosystems </a> <div class=navbar-dropdown > <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//ecosystems/linear-algebra/"> Linear Algebra </a> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//ecosystems/models/"> Models </a> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//ecosystems/solvers/"> Solvers </a> </div> </div> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//references/"> References </a> <a class=navbar-item  href="https://jsotemp.netlify.app/previews/PR11//contributing/"> Contributing </a> </div> <div class=navbar-end > <a class="navbar-item icon-text" href="https://github.com/JuliaSmoothOptimizers/juliasmoothoptimizers.github.io/issues"> <span class=icon > <ion-icon size=large  name=logo-github ></ion-icon> </span> <span>Report an issue</span> </a> </div> </div> </nav> <section class=section > <div class=container > <div class=content ><div class=franklin-content ><h1 id=title ><a href="#title" class=header-anchor >Template</a></h1></p> <div class=author >by Geoffroy Leconte</div> <p><img class=badge  src="https://img.shields.io/badge/DelimitedFiles-STDLIB-666?style=flat-square&labelColor=444"> <img class=badge  src="https://img.shields.io/badge/LinearAlgebra-STDLIB-666?style=flat-square&labelColor=444"> <h2 id=input ><a href="#input" class=header-anchor >Input</a></h2> <p>RipQP uses the package <a href="https://github.com/JuliaSmoothOptimizers/QuadraticModels.jl">QuadraticModels.jl</a> to model convex quadratic problems.</p> <p>Here is a basic example:</p> <pre><code class=language-julia >using QuadraticModels, LinearAlgebra, SparseMatricesCOO
Q &#61; &#91;6. 2. 1.
     2. 5. 2.
     1. 2. 4.&#93;
c &#61; &#91;-8.; -3; -3&#93;
A &#61; &#91;1. 0. 1.
     0. 2. 1.&#93;
b &#61; &#91;0.; 3&#93;
l &#61; &#91;0.;0;0&#93;
u &#61; &#91;Inf; Inf; Inf&#93;
QM &#61; QuadraticModel&#40;
  c,
  SparseMatrixCOO&#40;tril&#40;Q&#41;&#41;,
  A&#61;SparseMatrixCOO&#40;A&#41;,
  lcon&#61;b,
  ucon&#61;b,
  lvar&#61;l,
  uvar&#61;u,
  c0&#61;0.,
  name&#61;&quot;QM&quot;
&#41;</code></pre> <pre><code class=language-julia >Error: ArgumentError: Package QuadraticModels not found in current path:
- Run &#96;import Pkg; Pkg.add&#40;&quot;QuadraticModels&quot;&#41;&#96; to install the QuadraticMode
ls package.</code></pre> <p>Once your <code>QuadraticModel</code> is loaded, you can simply solve it RipQP:</p> <pre><code class=language-julia >using RipQP
stats &#61; ripqp&#40;QM&#41;
println&#40;stats&#41;</code></pre> <pre><code class=language-julia >Error: ArgumentError: Package RipQP not found in current path:
- Run &#96;import Pkg; Pkg.add&#40;&quot;RipQP&quot;&#41;&#96; to install the RipQP package.</code></pre> <p>The <code>stats</code> output is a <a href="https://juliasmoothoptimizers.github.io/SolverCore.jl/dev/reference/#SolverCore.GenericExecutionStats">GenericExecutionStats</a>.</p> <p>It is also possible to use the package <a href="https://github.com/JuliaSmoothOptimizers/QPSReader.jl">QPSReader.jl</a> in order to read convex quadratic problems in MPS or SIF formats: &#40;download <a href="https://raw.githubusercontent.com/JuliaSmoothOptimizers/RipQP.jl/main/test/QAFIRO.SIF">QAFIRO</a>&#41;</p> <pre><code class=language-julia >using QPSReader, QuadraticModels
QM &#61; QuadraticModel&#40;readqps&#40;&quot;QAFIRO.SIF&quot;&#41;&#41;</code></pre> <pre><code class=language-julia >Error: ArgumentError: Package QPSReader not found in current path:
- Run &#96;import Pkg; Pkg.add&#40;&quot;QPSReader&quot;&#41;&#96; to install the QPSReader package.</code></pre> <h2 id=logging ><a href="#logging" class=header-anchor >Logging</a></h2> <p>RipQP displays some logs at each iterate.</p> <p>You can deactivate logging with</p> <pre><code class=language-julia >stats &#61; ripqp&#40;QM, display &#61; false&#41;</code></pre>
<pre><code class=language-julia >Error: UndefVarError: ripqp not defined</code></pre>
<p>It is also possible to get a history of several quantities such as the primal and dual residuals and the relative primal-dual gap. These quantites are available in the dictionary <code>solver_specific</code> of the <code>stats</code>.</p>
<pre><code class=language-julia >stats &#61; ripqp&#40;QM, history &#61; true&#41;
pddH &#61; stats.solver_specific&#91;:pddH&#93;</code></pre>
<pre><code class=language-julia >Error: UndefVarError: ripqp not defined</code></pre>
<h2 id=change_configuration_and_tolerances ><a href="#change_configuration_and_tolerances" class=header-anchor >Change configuration and tolerances</a></h2>
<p>You can use <code>RipQP</code> without scaling with:</p>
<pre><code class=language-julia >stats &#61; ripqp&#40;QM, scaling &#61; false&#41;</code></pre>
<pre><code class=language-julia >Error: UndefVarError: ripqp not defined</code></pre>
<p>You can also change the <a href="https://juliasmoothoptimizers.github.io/RipQP.jl/stable/API/#RipQP.InputTol"><code>RipQP.InputTol</code></a> type to change the tolerances for the stopping criteria:</p>
<pre><code class=language-julia >stats &#61; ripqp&#40;QM, itol &#61; InputTol&#40;max_iter &#61; 100, Ïµ_rb &#61; 1e-4&#41;, scaling &#61; false&#41;</code></pre>
<pre><code class=language-julia >Error: UndefVarError: InputTol not defined</code></pre>
<h2 id=save_the_interior-point_system ><a href="#save_the_interior-point_system" class=header-anchor >Save the Interior-Point system</a></h2>
<p>At every iteration, RipQP solves two linear systems with the default Predictor-Corrector method &#40;the affine system and the corrector-centering system&#41;, or one linear system with the Infeasible Path-Following method.</p>
<p>To save these systems, you can use:</p>
<pre><code class=language-julia >w &#61; SystemWrite&#40;write &#61; true, name&#61;&quot;test_&quot;, kfirst &#61; 4, kgap&#61;3&#41;
stats1 &#61; ripqp&#40;QM, w &#61; w&#41;</code></pre>
<pre><code class=language-julia >Error: UndefVarError: SystemWrite not defined</code></pre>
<p>This will save one matrix and the associated two right hand sides of the PC method every three iterations starting at iteration four. Then, you can read the saved files with:</p>
<pre><code class=language-julia >using DelimitedFiles, MatrixMarket
K &#61; MatrixMarket.mmread&#40;&quot;test_K_iter4.mtx&quot;&#41;
rhs_aff &#61; readdlm&#40;&quot;test_rhs_iter4_aff.rhs&quot;, Float64&#41;&#91;:&#93;
rhs_cc &#61;  readdlm&#40;&quot;test_rhs_iter4_cc.rhs&quot;, Float64&#41;&#91;:&#93;</code></pre>
<pre><code class=language-julia >Error: ArgumentError: Package MatrixMarket not found in current path:
- Run &#96;import Pkg; Pkg.add&#40;&quot;MatrixMarket&quot;&#41;&#96; to install the MatrixMarket pac
kage.</code></pre>
<h2 id=timers ><a href="#timers" class=header-anchor >Timers</a></h2>
<p>You can see the elapsed time with:</p>
<pre><code class=language-julia >stats1.elapsed_time</code></pre>
<pre><code class=language-julia >Error: UndefVarError: stats1 not defined</code></pre>
<p>For more advance timers you can use <a href="https://github.com/KristofferC/TimerOutputs.jl">TimerOutputs.jl</a>:</p>
<pre><code class=language-julia >using TimerOutputs
TimerOutputs.enable_debug_timings&#40;RipQP&#41;
reset_timer&#33;&#40;RipQP.to&#41;
stats &#61; ripqp&#40;QM&#41;
TimerOutputs.complement&#33;&#40;RipQP.to&#41; # print complement of timed sections
show&#40;RipQP.to, sortby &#61; :firstexec&#41;</code></pre>
<pre><code class=language-julia >Error: ArgumentError: Package TimerOutputs not found in current path:
- Run &#96;import Pkg; Pkg.add&#40;&quot;TimerOutputs&quot;&#41;&#96; to install the TimerOutputs pac
kage.</code></pre>
</div>
    </div>  
    </div>  
    </div>  
  </section>  

    
    
        
<script>hljs.initHighlightingOnLoad(); hljs.configure({ tabReplace: '    ' });</script>


<script>
  (function () {

    // Get the elements.
    // - the 'pre' element.
    // - the 'div' with the 'paste-content' id.

    var pre = document.getElementsByTagName('pre');

    // Add a copy button in the 'pre' element with className language-julia

    for (var i = 0; i < pre.length; i++) {
      var isLanguage = pre[i].children[0].className.indexOf('language-julia');

      if (isLanguage === 0) {
        var ion_icon = document.createElement('ion-icon');
        ion_icon.name = 'copy';

        var icon = document.createElement('span');
        icon.className = 'icon has-text-primary';
        icon.appendChild(ion_icon);

        var button = document.createElement('button');
        button.className = 'button copy-button is-light is-primary';
        button.appendChild(icon);

        pre[i].appendChild(button);
      }
    };

    // Run Clipboard

    var copyCode = new ClipboardJS('.copy-button', {
      target: function (trigger) {
        return trigger.previousElementSibling;
      }
    });

    copyCode.on('success', function (event) {
      event.clearSelection();
      var btn = event.trigger;
      var old_button_class = btn.className;
      var old_icon_class = btn.children[0].className;
      btn.className = 'button copy-button is-primary';
      btn.children[0].className = 'icon has-text-white';
      window.setTimeout(function () {
        event.trigger.className = old_button_class;
        event.trigger.children[0].className = old_icon_class;
      }, 1000);

    });

  })();
</script>
    
    <footer class=footer >
      <div class="content has-text-centered is-small">
        &copy; Abel Soares Siqueira. <br>
        Last modified: July 13, 2022.<br>
        <a class=link  href="https://github.com/JuliaSmoothOptimizers/">JSO at GitHub</a>
      </div>
    </footer>